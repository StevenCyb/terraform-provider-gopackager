---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "gopackager_compile Data Source - terraform-provider-gopackager"
subcategory: ""
description: |-
  Compiles GoLang source code into a binary executable and optionally creates a ZIP with additional files. This resource requires GoLang to be installed on the system. The resource will automatically download the required dependencies and compile the source code.
---

# gopackager_compile (Data Source)

Compiles GoLang source code into a binary executable and optionally creates a ZIP with additional files. This resource requires GoLang to be installed on the system. The resource will automatically download the required dependencies and compile the source code.

## Example Usage

```terraform
data "gopackager_compile" "example" {
  # Required
  ## Path to the main GoLang source or the root path of this file.
  source = "main.go"
  ## Output destination file.
  destination = "service/bootstrap"
  ## GOOS for compilation.
  goos = "linux"
  ## GOARCH for compilation.
  goarch = "amd64"

  # Optional
  ## Zip the compiled binary and additional resources.
  zip = true
  ## Additional resources to be zipped.
  ## {source_path = destination_path}
  zip_resources = {
    "static"  = "www/static"
    "LICENSE" = "LICENSE"
  }

  ## Enable git trigger mode to only rebuild when specified path has changes
  git_trigger = true
  ## Path to monitor for changes (defaults to current directory if not specified)
  git_trigger_path = "./src"
}

output "example" {
  value = {
    # `output_path` provides the path and file name of the compiled binary.
    # If `zip = true`, this will refer to the zip file.
    output_path = data.gopackager_compile.example.output_path
    # `output_md5` provides the md5 hash of the compiled binary or compressed ZIP file as hexadecimal encoded.
    # There are multiple factors that can affect the hash, that means
    output_md5 = data.gopackager_compile.example.output_md5
    # `output_sha1` provides the SHA1 hash of the compiled binary or compressed ZIP file as hexadecimal encoded.
    # There are multiple factors that can affect the hash, that means
    output_sha1 = data.gopackager_compile.example.output_sha1
    # `output_sha256` provides the SHA256 hash of the compiled binary or compressed ZIP file as hexadecimal encoded.
    # There are multiple factors that can affect the hash, that means
    output_sha256 = data.gopackager_compile.example.output_sha256
    # `output_sha512` provides the SHA512 hash of the compiled binary or compressed ZIP file as hexadecimal encoded.
    # There are multiple factors that can affect the hash, that means
    output_sha512 = data.gopackager_compile.example.output_sha512
    # `output_sha256_base64` provides the Base64 encoded SHA256 hash of the compiled binary or compressed ZIP file.
    # There are multiple factors that can affect the hash, that means
    output_sha256_base64 = data.gopackager_compile.example.output_sha256_base64
    # `output_sha512_base64` provides the Base64 encoded SHA512 hash of the compiled binary or compressed ZIP file.
    # There are multiple factors that can affect the hash, that means
    output_sha512_base64 = data.gopackager_compile.example.output_sha512_base64
    # Last commit hash that changes "*.go", "go.mod" or "go.sum" files.
    # Us this hash for if more consistent hash needed.
    # If retrieving the hash from git failed, this will be `unknown`.
    output_git_hash = data.gopackager_compile.example.output_git_hash
  }
}

# Git trigger example - only recompile when src directory changes
data "gopackager_compile" "git_triggered_example" {
  # Required
  source      = "main.go"
  destination = "service/bootstrap-git"
  goos        = "linux"
  goarch      = "amd64"

  # Git trigger configuration
  ## Enable git trigger mode to only rebuild when specified path has changes
  git_trigger = true
  ## Path to monitor for changes (defaults to current directory if not specified)
  git_trigger_path = "./src"
}

# Example on how to use it with AWS lambda.
# Example on how to use it with AWS lambda.
resource "aws_lambda_function" "example" {
  function_name    = "example"
  runtime          = "provided.al2023"
  handler          = "bootstrap"
  role             = aws_iam_role.lambda_role.arn
  timeout          = 15
  filename         = data.gopackager_compile.git_triggered_example.output_path
  source_code_hash = data.gopackager_compile.git_triggered_example.output_git_hash
  memory_size      = 128
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `destination` (String) Path for the compiled binary (or random UUID).
- `goarch` (String) GOARCH for the compiled binary.
- `goos` (String) GOOS for the compiled binary.
- `source` (String) Path to the main file.

### Optional

- `git_trigger` (Boolean) Enable git trigger mode to only rebuild when files in git_trigger_path have changed since last compilation.
- `git_trigger_path` (String) Path to watch for changes when git_trigger is enabled. Defaults to current directory if not specified.
- `zip` (Boolean) Zip the compiled binary and additional resources.
- `zip_resources` (Map of String) Additional resources to include in the zip file. The binary is automatically included an copied to the root of the zip file.

### Read-Only

- `output_git_hash` (String) Last commit hash of the repository that changed `*.go`,`go.mod` or `go.sum` files.
- `output_md5` (String) MD5 hash of the compiled binary or compressed ZIP file.
- `output_path` (String) Output path for the compiled binary or compressed ZIP file.
- `output_sha1` (String) SHA1 hash of the compiled binary or compressed ZIP file.
- `output_sha256` (String) SHA256 hash of the compiled binary or compressed ZIP file.
- `output_sha256_base64` (String) Base64 encoded SHA256 hash of the compiled binary or compressed ZIP file.
- `output_sha512` (String) SHA512 hash of the compiled binary or compressed ZIP file.
- `output_sha512_base64` (String) Base64 encoded SHA512 hash of the compiled binary or compressed ZIP file.
